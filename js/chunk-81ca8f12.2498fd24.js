(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81ca8f12"],{1843:function(e,t,o){"use strict";var a=o("7a23"),c={class:"modal fade",id:"deleteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},r={class:"modal-dialog",role:"document"},d={class:"modal-content"},s=Object(a["createVNode"])("div",{class:"modal-header bg-primary text-white"},[Object(a["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},"刪除確認"),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),n={class:"modal-body"},i={class:"modal-footer"},l=Object(a["createVNode"])("button",{class:"btn btn-secondary",type:"button","data-bs-dismiss":"modal"},"取消",-1);function b(e,t,o,b,u,p){return Object(a["openBlock"])(),Object(a["createBlock"])("div",c,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",d,[s,Object(a["createVNode"])("div",n,"您確定要刪除 "+Object(a["toDisplayString"])(o.item.title)+" 嗎？",1),Object(a["createVNode"])("div",i,[l,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(t){return e.$emit("confirm",o.item.id)})}," 確認 ")])])])],512)}var u=o("7c2b"),p=o.n(u),O={data:function(){return{modal:""}},props:["item"],mounted:function(){this.modal=new p.a(this.$refs.modal,{keyboard:!1})},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}}};O.render=b;t["a"]=O},"4e40":function(e,t,o){},5651:function(e,t,o){"use strict";o.r(t);o("b0c0");var a=o("7a23"),c={class:"container-fluid"},r=Object(a["createVNode"])("div",{class:"d-sm-flex align-items-center justify-content-between mb-4"},[Object(a["createVNode"])("h1",{class:"h3 mb-0 text-gray-800"},[Object(a["createVNode"])("i",{class:"fas fa-shopping-cart"}),Object(a["createTextVNode"])(" 訂單管理")])],-1),d={class:"row"},s={class:"col-lg-12"},n={class:"card shadow mb-4"},i=Object(a["createVNode"])("div",{class:"card-header py-3"},[Object(a["createVNode"])("h6",{class:"m-0 font-weight-bold text-primary"},"訂單列表")],-1),l={class:"card-body"},b={class:"table-responsive"},u={class:"table mt-4"},p=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{width:"20%",class:"text-center"},"訂單編號"),Object(a["createVNode"])("th",{width:"15%"},"收件人姓名"),Object(a["createVNode"])("th",{width:"15%"},"收件人信箱"),Object(a["createVNode"])("th",{width:"10%",class:"text-end"},"金額"),Object(a["createVNode"])("th",{width:"10%",class:"text-center"},"付款狀態"),Object(a["createVNode"])("th",{width:"8%",class:"text-center"},"編輯"),Object(a["createVNode"])("th",{width:"8%",class:"text-center"},"刪除")])],-1),O={class:"text-center"},m={class:"text-end"},h={class:"text-center"},j={class:"text-center"},f={class:"text-center"},N={class:"text-center"},V=Object(a["createTextVNode"])(" 目前有 "),g={id:"productCount"},v=Object(a["createTextVNode"])(" 筆訂單 ");function y(e,t,o,y,x,w){var k=Object(a["resolveComponent"])("loading"),I=Object(a["resolveComponent"])("pagination"),M=Object(a["resolveComponent"])("order-modal"),T=Object(a["resolveComponent"])("delete-modal");return Object(a["openBlock"])(),Object(a["createBlock"])("div",c,[Object(a["createVNode"])(k,{active:x.isLoading},null,8,["active"]),r,Object(a["createVNode"])("div",d,[Object(a["createVNode"])("div",s,[Object(a["createVNode"])("div",n,[i,Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",b,[Object(a["createVNode"])("table",u,[p,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(x.orderList,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("td",O,Object(a["toDisplayString"])(e.create_at),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.user.name),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.user.email),1),Object(a["createVNode"])("td",m,Object(a["toDisplayString"])(e.total),1),Object(a["createVNode"])("td",h,[Object(a["createVNode"])("span",{class:["badge pointer",e.is_paid?"bg-success":"bg-secondary"],style:{"font-size":"1em"},onClick:function(t){return w.paidChange(e)}},Object(a["toDisplayString"])(e.is_paid?"已付款":"未付款"),11,["onClick"])]),Object(a["createVNode"])("td",j,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-success move",onClick:function(t){return w.openModal("update",e)}}," 編輯 ",8,["onClick"])]),Object(a["createVNode"])("td",f,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-danger move",onClick:function(t){return w.openModal("delete",e)}}," 刪除 ",8,["onClick"])])])})),128))])])]),Object(a["createVNode"])("div",N,[Object(a["createVNode"])("p",null,[V,Object(a["createVNode"])("span",g,Object(a["toDisplayString"])(x.orderList.length),1),v])]),Object(a["createVNode"])(I,{"page-info":x.pageInfo,onPageChange:w.getOrder},null,8,["page-info","onPageChange"])])])])]),Object(a["createVNode"])(M,{order:x.tempOrder,onModifyOrder:w.modifyOrder,ref:"orderModal"},null,8,["order","onModifyOrder"]),Object(a["createVNode"])(T,{item:x.tempOrder,onConfirm:w.deleteOrder,ref:"deleteModal"},null,8,["item","onConfirm"])])}o("99af");var x=o("d529"),w=Object(a["withScopeId"])("data-v-29ee09fe");Object(a["pushScopeId"])("data-v-29ee09fe");var k={class:"modal fade",id:"orderModal",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true",ref:"modal"},I={class:"modal-dialog modal-xl"},M={class:"modal-content"},T=Object(a["createVNode"])("div",{class:"modal-header bg-primary text-white"},[Object(a["createVNode"])("h5",{class:"modal-title",id:"orderModalLabel"},"更新訂單資訊"),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_={class:"modal-body"},C={class:"row"},$={class:"col-sm-12"},S={class:"row"},D={class:"mb-3 col-md-6"},L=Object(a["createVNode"])("label",{for:"name",class:"form-label"},"訂單編號",-1),B={class:"mb-3 col-md-6"},U=Object(a["createVNode"])("div",{class:"mb-2"},"付款狀態",-1),J={class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},E=Object(a["createVNode"])("label",{class:"btn btn-outline-success",for:"is_paid"},"已付款",-1),A=Object(a["createVNode"])("label",{class:"btn btn-outline-secondary",for:"not_paid"},"尚未付款",-1),F={class:"row"},P={class:"mb-3 col-md-6"},q=Object(a["createVNode"])("label",{for:"userEmail",class:"form-label"},[Object(a["createTextVNode"])("Email"),Object(a["createVNode"])("span",{class:"text-red"}," *")],-1),z={class:"mb-3 col-md-6"},G=Object(a["createVNode"])("label",{for:"userName",class:"form-label"},[Object(a["createTextVNode"])("收件人名稱"),Object(a["createVNode"])("span",{class:"text-red"}," *")],-1),H={class:"row"},K={class:"mb-3 col-md-6"},Q=Object(a["createVNode"])("label",{for:"userTel",class:"form-label"},[Object(a["createTextVNode"])("收件人電話"),Object(a["createVNode"])("span",{class:"text-red"}," *")],-1),R={class:"mb-3 col-md-6"},W=Object(a["createVNode"])("label",{for:"userAddress",class:"form-label"},[Object(a["createTextVNode"])("收件人地址"),Object(a["createVNode"])("span",{class:"text-red"}," *")],-1),X={class:"mb-3"},Y=Object(a["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),Z=Object(a["createVNode"])("hr",null,null,-1),ee={class:"table-responsive"},te=Object(a["createTextVNode"])(" 商品明細 "),oe={class:"table product-list"},ae=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{width:"10%",class:"text-center"},"商品圖片"),Object(a["createVNode"])("th",{width:"15%"},"品名"),Object(a["createVNode"])("th",{width:"15%"},"數量"),Object(a["createVNode"])("th",{width:"10%",class:"text-end"},"單價"),Object(a["createVNode"])("th",{width:"10%",class:"text-end"},"總價")])],-1),ce={class:"text-center"},re={class:"text-end"},de={class:"text-end"},se=Object(a["createVNode"])("td",{colspan:"4",class:"text-end"},"總計",-1),ne={class:"text-end"},ie={class:"modal-footer"},le=Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1);Object(a["popScopeId"])();var be=w((function(e,t,o,c,r,d){return Object(a["openBlock"])(),Object(a["createBlock"])("div",k,[Object(a["createVNode"])("div",I,[Object(a["createVNode"])("div",M,[T,Object(a["createVNode"])("div",_,[Object(a["createVNode"])("div",C,[Object(a["createVNode"])("div",$,[Object(a["createVNode"])("div",S,[Object(a["createVNode"])("div",D,[L,Object(a["withDirectives"])(Object(a["createVNode"])("input",{id:"name",type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.orderInfo.create_at=e}),disabled:""},null,512),[[a["vModelText"],r.orderInfo.create_at]])]),Object(a["createVNode"])("div",B,[U,Object(a["createVNode"])("div",J,[Object(a["createVNode"])("input",{type:"radio",class:"btn-check",name:"btnradio",id:"is_paid",autocomplete:"off",checked:r.orderInfo.is_paid,onClick:t[2]||(t[2]=function(e){return r.orderInfo.is_paid=!0})},null,8,["checked"]),E,Object(a["createVNode"])("input",{type:"radio",class:"btn-check",name:"btnradio",id:"not_paid",autocomplete:"off",checked:!r.orderInfo.is_paid,onClick:t[3]||(t[3]=function(e){return r.orderInfo.is_paid=!1})},null,8,["checked"]),A])])]),Object(a["createVNode"])("div",F,[Object(a["createVNode"])("div",P,[q,Object(a["withDirectives"])(Object(a["createVNode"])("input",{id:"userEmail",type:"email",class:"form-control",placeholder:"請輸入Email","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.orderInfo.user.email=e})},null,512),[[a["vModelText"],r.orderInfo.user.email]])]),Object(a["createVNode"])("div",z,[G,Object(a["withDirectives"])(Object(a["createVNode"])("input",{id:"userName",type:"text",class:"form-control",placeholder:"請輸入收件人名稱","onUpdate:modelValue":t[5]||(t[5]=function(e){return r.orderInfo.user.name=e})},null,512),[[a["vModelText"],r.orderInfo.user.name]])])]),Object(a["createVNode"])("div",H,[Object(a["createVNode"])("div",K,[Q,Object(a["withDirectives"])(Object(a["createVNode"])("input",{id:"userTel",type:"tel",class:"form-control",placeholder:"請輸入收件人電話","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.orderInfo.user.tel=e})},null,512),[[a["vModelText"],r.orderInfo.user.tel]])]),Object(a["createVNode"])("div",R,[W,Object(a["withDirectives"])(Object(a["createVNode"])("input",{id:"userAddress",type:"text",class:"form-control",placeholder:"請輸入收件人地址","onUpdate:modelValue":t[7]||(t[7]=function(e){return r.orderInfo.user.address=e})},null,512),[[a["vModelText"],r.orderInfo.user.address]])])]),Object(a["createVNode"])("div",X,[Y,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{id:"message",type:"text",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=function(e){return r.orderInfo.message=e}),disabled:""},null,512),[[a["vModelText"],r.orderInfo.message]])]),Z,Object(a["createVNode"])("div",ee,[te,Object(a["createVNode"])("table",oe,[ae,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.orderInfo.products,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t},[Object(a["createVNode"])("td",ce,[Object(a["createVNode"])("img",{src:e.product.imageUrl,alt:e.product.title},null,8,["src","alt"])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.product.title),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.qty),1),Object(a["createVNode"])("td",re,Object(a["toDisplayString"])(e.product.price),1),Object(a["createVNode"])("td",de,Object(a["toDisplayString"])(e.total),1)])})),128))]),Object(a["createVNode"])("tfoot",null,[Object(a["createVNode"])("tr",null,[se,Object(a["createVNode"])("td",ne,Object(a["toDisplayString"])(r.orderInfo.total),1)])])])])])])]),Object(a["createVNode"])("div",ie,[le,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=function(t){return e.$emit("modify-order")})}," 送出 ")])])])],512)})),ue=o("7c2b"),pe=o.n(ue),Oe={data:function(){return{modal:"",orderInfo:{user:{},products:{}}}},props:{order:{type:Object,default:function(){return{user:{},products:{}}}}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},watch:{order:function(){this.orderInfo=this.order,this.orderInfo.user||(this.orderInfo.user={}),this.order.products||(this.orderInfo.products={})}},mounted:function(){this.modal=new pe.a(this.$refs.modal,{keyboard:!1})}};o("8470");Oe.render=be,Oe.__scopeId="data-v-29ee09fe";var me=Oe,he=o("1843"),je={data:function(){return{isLoading:!1,orderList:[],tempOrder:{user:{},products:[]},pageInfo:{total_pages:1,current_page:1,has_pre:!1,has_next:!1}}},components:{pagination:x["a"],orderModal:me,deleteModal:he["a"]},methods:{getOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("ethan","/admin/orders?page=").concat(t)).then((function(t){e.isLoading=!1,t.data.success?(e.orderList=t.data.orders,e.pageInfo=t.data.pagination):e.$moshaToast(t.data.message,{type:"danger",showIcon:!0,position:"bottom-right"})})).catch((function(e){console.log(e)}))},openModal:function(e,t){switch(e){case"update":this.tempOrder=JSON.parse(JSON.stringify(t)),this.$refs.orderModal.openModal();break;case"delete":this.tempOrder=JSON.parse(JSON.stringify(t)),this.tempOrder.title="訂單編號：".concat(t.create_at),this.$refs.deleteModal.openModal();break;default:break}},modifyOrder:function(){var e=this,t=0;if(this.tempOrder.user?(this.tempOrder.user.email||(t+=1,setTimeout((function(){e.$moshaToast("請填寫Email",{type:"danger",showIcon:!0,position:"bottom-right"})}),1)),this.tempOrder.user.name||(t+=1,setTimeout((function(){e.$moshaToast("請填寫收件人名稱",{type:"danger",showIcon:!0,position:"bottom-right"})}),1)),this.tempOrder.user.tel||(t+=1,setTimeout((function(){e.$moshaToast("請填寫收件人電話",{type:"danger",showIcon:!0,position:"bottom-right"})}),1)),this.tempOrder.user.address||(t+=1,setTimeout((function(){e.$moshaToast("請填寫收件人地址",{type:"danger",showIcon:!0,position:"bottom-right"})}),1))):(t+=1,this.$moshaToast("請填寫收件人資訊",{type:"danger",showIcon:!0,position:"bottom-right"})),0===t){var o={data:{user:this.tempOrder.user,is_paid:this.tempOrder.is_paid}};this.editOrder(this.tempOrder.id,o,(function(){e.$refs.orderModal.hideModal()}))}},paidChange:function(e){var t={data:{is_paid:!e.is_paid}};this.editOrder(e.id,t)},editOrder:function(e,t,o){var a=this;this.isLoading=!0,this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("ethan","/admin/order/").concat(e),t).then((function(e){e.data.success?(a.$moshaToast(e.data.message,{type:"success",showIcon:!0,position:"bottom-right"}),a.getOrder()):(a.$moshaToast(e.data.message,{type:"danger",showIcon:!0,position:"bottom-right"}),a.isLoading=!1),o&&o()})).catch((function(e){console.log(e)}))},deleteOrder:function(e){var t=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("ethan","/admin/order/").concat(e)).then((function(e){e.data.success?(t.$refs.deleteModal.hideModal(),t.$moshaToast(e.data.message,{type:"success",showIcon:!0,position:"bottom-right"}),t.getOrder()):(t.$moshaToast(e.data.message,{type:"danger",showIcon:!0,position:"bottom-right"}),t.isLoading=!1)})).catch((function(e){console.log(e)}))}},created:function(){this.getOrder()}};je.render=y;t["default"]=je},8470:function(e,t,o){"use strict";o("4e40")}}]);
//# sourceMappingURL=chunk-81ca8f12.2498fd24.js.map